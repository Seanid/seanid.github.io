<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">


























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.0.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="Sean blogs">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Sean blogs">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sean blogs">






  <link rel="canonical" href="http://yoursite.com/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Sean blogs</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Sean blogs</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-首页 menu-item-active">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-首页"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-github">

    
    
    
      
    

    

    <a href="https://github.com/Seanid" rel="noopener" target="_blank"><i class="menu-item-icon fa fa-fw fa-github"></i> <br>github</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-归档">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-归档"></i> <br>归档</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/20/sso-cookie/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sean Huang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sean blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/20/sso-cookie/" class="post-title-link" itemprop="url">基于cookie的多系统登录</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-04-20 18:57:59" itemprop="dateCreated datePublished" datetime="2019-04-20T18:57:59+08:00">2019-04-20</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-04-22 09:24:21" itemprop="dateModified" datetime="2019-04-22T09:24:21+08:00">2019-04-22</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="职场挖矿-基于cookie的多系统登录"><a href="#职场挖矿-基于cookie的多系统登录" class="headerlink" title="[职场挖矿]基于cookie的多系统登录"></a>[职场挖矿]基于cookie的多系统登录</h1><h4 id="公司：HJSD"><a href="#公司：HJSD" class="headerlink" title="公司：HJSD"></a>公司：HJSD</h4><h4 id="职位：Java开发工程师"><a href="#职位：Java开发工程师" class="headerlink" title="职位：Java开发工程师"></a>职位：Java开发工程师</h4><h4 id="项目代号：G"><a href="#项目代号：G" class="headerlink" title="项目代号：G"></a>项目代号：G</h4><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>G项目是在HJSD接触的第一个项目，是一个年长且功能强大的业务项目，子系统10+个，包含了数据采集、任务调度、报表展示、业务管理等一系列的功能。各个子系统公用一套用户体系，用户一次注册/登录即可实现系统间的相互切换</p>
<h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h2><p>一个项目多个子系统，在项目进行到后期是比较常见的情况。解决多系统之间授权的方式也有很多，比如我们常见的使用cas的方式。而在这个项目中，可能由于比较年长的原因，它采用的是基于同域共享cookie的方式来进行多个系统之间的授权</p>
<h3 id="实现前提"><a href="#实现前提" class="headerlink" title="实现前提"></a>实现前提</h3><ol>
<li>使用同个域名下的子域名（可以细化到二级域名、三级域名）</li>
<li>独立用户中心</li>
<li>自定义严谨的cookie共享策略（加密策略、过期策略、获取策略）</li>
</ol>
<h3 id="基础逻辑"><a href="#基础逻辑" class="headerlink" title="基础逻辑"></a>基础逻辑</h3><p><img src="../images/cookie-sso.jpg" alt="流程图"></p>
<p>上图是一个简单的逻辑流程：</p>
<ol>
<li>用户首次请求的时候，各子系统进行第一轮的校验</li>
<li>系统未能从*.a.com的域名下获取相关用户信息，进行页面跳转，将用户引导到用户中心的登录页面</li>
<li>用户在登陆页面输入用户名密码进行登录请求</li>
<li>用户中心校验用户信息，成功后将用户信息写入*.a.com这个域名的cookie下。此处需要对信息进行加密</li>
<li>用户中心引导跳转返回原来请求的子系统</li>
<li>子系统再次校验通过后，显示用户所需要请求的页面</li>
</ol>
<h3 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h3><p>这种方式，其实依靠的是同域名cookie共享的方式，使得用户登录状态可以给多个子系统获取，早期许多系统采用的是这种方式，但这种方式却存在着局限性，所以后期有了更好的解决方案。局限性如下：</p>
<ol>
<li>同样的方式，在多个域名的情况就会存在问题了。</li>
<li>这种方式在不同语言中不能通用，因为不同语言使用的cookie方案是不一样的</li>
<li>cookie存在安全性的问题，容易被cookie伪造实现系统登录（实操过^_^）</li>
</ol>
<p>虽然说有局限，可是如果是用在内部系统，在设置白名单的情况下，这种方式不失为一种节省资源的多系统解决方案</p>
<p>如何解决cookie安全问题？</p>
<p>虽然cookie的安全性问题没法根治，但如果必要的措施可以让安全问题没那么高</p>
<ol>
<li>对cookie进行加密解密</li>
<li>限制多系统之间授权的方式，即A系统要登录B系统，需要通过一个特殊的页面进行授权跳转才行，这个页面在系统内部，没法通过外部访问</li>
<li>多个系统用多个加密授权的cookie，防止仅使用一个授权cookie</li>
<li>对用户的最后访问路径进行监控，因为访问的路径修改的频率较高，进行cookie窃取没法窃取最新的（仅限参考）</li>
</ol>
<p>最后，除了一些已经稳定运行，迭代了多次的老项目，还是采用更安全的方式吧</p>
<hr>
<h4 id="点滴知识，源于思考"><a href="#点滴知识，源于思考" class="headerlink" title="点滴知识，源于思考"></a>点滴知识，源于思考</h4>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/15/ssl-excepiton/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sean Huang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sean blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/01/15/ssl-excepiton/" class="post-title-link" itemprop="url">[工作笔记]JDK版本不同导致的SSL异常</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-01-15 01:31:00" itemprop="dateCreated datePublished" datetime="2017-01-15T01:31:00+08:00">2017-01-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-10-16 22:35:22" itemprop="dateModified" datetime="2018-10-16T22:35:22+08:00">2018-10-16</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>遇到这个问题得说一下笔者的开发环境，笔者所在公司，平时开发用的web容器是jboss，使用的JDK是oracle的JDK，但是测试和生产环境用的是WAS，JDK用的是IBM的JDK，由于项目的不同，测试环境所安装的web容器和JDK版本都并不相同。这个也是笔者遇到问题的原因所在。</p>
<h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>笔者在公司负责一个项目的开发，该项目有一个功能需要调用到公司另一个项目的接口，而那个项目提供的接口是基于HTTPS的，所以笔者在进行调用的时候，使用了JDK提供的SSL连接进行了请求。</p>
<blockquote>
<p>SSLContext.getInstance(“SSL”);</p>
</blockquote>
<p>该代码，笔者在自己本机的JBoss上测试过，并没有问题。可是，发布到was里面之后，程序一直没法成功调用接口，通过日志追踪后，发现程序在服务器运行的时候后台报了异常，该异常如下：</p>
<blockquote>
<p>javax.net.ssl.SSLHandshakeException: Remote host closed connection during handshank</p>
</blockquote>
<p>握手失败，网上有人说，该异常是因为证书的原因，可是笔者尝试过后发现，该说法并不对应笔者所描述的场景，最后在同事的帮助下找到了原因。</p>
<h4 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h4><p>该问题出现的原因在于SSL协议的版本不同。发现问题之后，笔者分析了一下具体情况。由于项目的原因，笔者现在用的JDK版本还是1.5的，同时，笔者去调的项目也是个老项目，用的JDK版本也是1.5的。所以当笔者通过本地测试的时候，SSL的请求方和接收方的版本是一致的，并没有问题。可是由于项目的扩容，笔者项目的测试环境前阵子进行了迁移，新的测试环境采用的是IBM的JDK1.6。因为JDK版本不同，默认采用的握手协议不同，所以导致两边程序进行握手的时候会失败。<br>仔细查询了一下资料后发现，原来oracle的JDK默认采用的是TLSv1和TLSv2进行尝试握手连接的，而IBM新的JDK采用的是SSLv3，新老版本还不一样。<br>详细的资料地址：<a href>http://www-01.ibm.com/support/docview.wss?uid=swg21687173</a></p>
<h4 id="问题解决"><a href="#问题解决" class="headerlink" title="问题解决"></a>问题解决</h4><p>该问题的解决方法有两个：<br>方法一：修改获取SSL连接的的代码（笔者使用的方法，简单）</p>
<blockquote>
<p>SSLContext.getInstance(“TLS”);</p>
</blockquote>
<p>方法二：更新IBM的JDK<br>在上面给出的链接中，其实IBM已经意识到自己的问题，也给出了另外一个补丁，据说更新后就能成功（笔者没尝试过(￣▽￣)”）</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/08/29/Java-socket-status/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sean Huang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sean blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/08/29/Java-socket-status/" class="post-title-link" itemprop="url">三次握手和四次挥手的各种状态</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-08-29 21:56:06" itemprop="dateCreated datePublished" datetime="2016-08-29T21:56:06+08:00">2016-08-29</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2016-08-30 01:22:32" itemprop="dateModified" datetime="2016-08-30T01:22:32+08:00">2016-08-30</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="关于四次挥手"><a href="#关于四次挥手" class="headerlink" title="关于四次挥手"></a>关于四次挥手</h4><p>说到四次挥手，可能有些人不知道是什么意思。可是如果说三次握手，应该说大部分学计算机的朋友应该都知道了吧。三次握手，不管是学网络还是学计算机，都应该是必修课之一了，具体是什么概念，在此就不再赘述了。</p>
<p>重新说回四次挥手，其实，四次挥手是三次握手之后的产物。TCP协议中，在发送数据之前，需要进行三次握手的确认，同样的，在取消连接的时候，客户端和服务端同样需要进行确认，而这确认的过程，就是所谓的四次挥手。</p>
<p><img src="http://image.e65535.com/sicihuishou.jpg" alt="四次挥手"></p>
<p>图是从网络上周到的关于TCP进行三次握手和四次挥手的过程图。从这可以看出双方的联系。</p>
<h4 id="为什么要关注四次挥手"><a href="#为什么要关注四次挥手" class="headerlink" title="为什么要关注四次挥手"></a>为什么要关注四次挥手</h4><p>了解了四次挥手后，可能有人认为get到了一个新的概念了。那么，仅此而已吗？之所以关注四次挥手，其实是因为它更贴近于开发，我们日常的很多编程过程中遇到的网络问题，有一部分，也是来源于四次挥手。所以，了解四次挥手的各种状态，对于开发排错，还是有较大的好处的</p>
<h4 id="三次握手的两种状态"><a href="#三次握手的两种状态" class="headerlink" title="三次握手的两种状态"></a>三次握手的两种状态</h4><p>在此先说，在实现四次挥手的各种状态之前，我们能监控到的三次握手的两种状态。</p>
<h5 id="Listening"><a href="#Listening" class="headerlink" title="Listening"></a>Listening</h5><p>Listening 是服务器端的状态，通过netstat查看到该状态，说明该PC启动了一个服务端在监听某个端口。要实现这种状态，在Java中只需要开启一个serversocket即可。<br>    &gt; ServerSocket serverSocket=new ServerSocket(8080);</p>
<p>当服务器端运行了这样一段代码的时候，通过netstat可以跟踪到的端口状态就是Listening</p>
<p><img src="http://image.e65535.com/listening.jpg" alt="监听"></p>
<p>由于服务器端口号是固定的，同一个端口号只能属于一个程序，所以，通常在这个阶段会遇到的问题，就是端口被占用的问题，Java里面的常见异常就是BindException。</p>
<h5 id="Established"><a href="#Established" class="headerlink" title="Established"></a>Established</h5><p>Established 是服务器端和客户端共有的状态，表示双方处于连接状态。通常在这种状态，客户端会开启一个随机端口，与服务器端口进行发送数据，所以在这种状态下，客户端netsstat会发现一条Established的连接是与服务器相连的，端口号随机。而服务器端通过netstat查看，除了原本端口监听的数据连接数据外，同样会发现一条Established的连接与客户端相连。</p>
<p><img src="http://image.e65535.com/established.jpg" alt="正常连接"></p>
<h4 id="四次挥手的各种状态"><a href="#四次挥手的各种状态" class="headerlink" title="四次挥手的各种状态"></a>四次挥手的各种状态</h4><p>上面讲的主要是三次握手的两种状态，接下来讲下四次挥手阶段的几个状态。应该说，在编程过程中，很容易由于编程人员的疏忽，在四次挥手阶段导致各种网络问题</p>
<h5 id="FIN-WAIT-2"><a href="#FIN-WAIT-2" class="headerlink" title="FIN_WAIT_2"></a>FIN_WAIT_2</h5><p>为什么不说FIN_WAIT_1，而说FIN_WAIT_2？因为FIN_WAIT_1的状态是在主动方发出close的时候转瞬即逝的状态，不好监控，而且一般不会有问题。</p>
<p>回到最先的那幅图可以看到，FIN_WAIT_2是在主动发出关闭连接请求后的一种状态，此时，客户端还没有发出最后的ACK码。</p>
<p>要重现这种状态，只要无论是在服务器或者是在客户端，主动调起关闭连接的请求而被调用方不进行处理即可。</p>
<h5 id="CLOSE-WAIT"><a href="#CLOSE-WAIT" class="headerlink" title="CLOSE_WAIT"></a>CLOSE_WAIT</h5><p>CLOSE_WAIT 与FIN_WAIT_2 是主动与被动的关系，该状态出现在被动关闭连接方。上面说到，一方关闭连接，一方不进行处理，就会导致主动一方进入FIN_WAIT_2状态，而被动方则进入CLOSE_WAIT状态。</p>
<p>CLOSE_WAIT 与FIN_WAIT_2这种两种状态的大量出现，意味着其中有一方没有做好socket关闭的的处理，通常可能出现在客户端和服务器端采用短连接的方式进行数据传输，而其中一方没做好关闭操作的情况下。</p>
<p>值得注意的是，如果是服务端进行了socket关闭而客户端不进行关闭，那么服务器端在进入FIN_WAIT_2状态不久就会进入TIME_WAIT状态。而如果是客户端进行进行socket关闭的时候，客户端会处于FIN_WAIT_2状态知道系统自动处理为止，而服务端则一直处于close_wait状态。</p>
<p>试验代码：<br>    &gt; //客户端<br>    &gt;<br>    &gt; for(int i=0;i&lt;49;i++){<br>    &gt;<br>    &gt;   Socket socket =new Socket(host,port);<br>    &gt;<br>    &gt;   socket.close();<br>    &gt;<br>    &gt;}<br>    &gt;</p>
<p><br></p>
<blockquote>
<p>//服务端</p>
<p>ServerSocket serverSocket=new ServerSocket(8080);</p>
</blockquote>
<p>效果如下：<br><img src="http://image.e65535.com/time_wait.jpg" alt="正常连接"></p>
<p>以上方法，会导致大量服务器资源无法释放。。。。</p>
<h5 id="TIME-WAIT"><a href="#TIME-WAIT" class="headerlink" title="TIME_WAIT"></a>TIME_WAIT</h5><p>TIME_WAIT 是在四次挥手过程中的最后一步，一般走完四次挥手的正常流程，主动发起关闭连接的一方都会处于这个状态一段时间，具体的时间根据系统而定。在这一步，会遇到的情况就是前面说的，有服务器端发起连接关闭，客户端没有关闭。因为是服务器端进行关闭的，所以进入FIN_WAIT_2状态不久就会进入TIME_WAIT状态。大量的请求关闭导致的服务器出现大量的TIME_WAIT状态从而使服务器无法正常的运行。典型例子：mysql连接未关闭。</p>
<p>至此，三次握手和四次挥手会出现的各种状态总结完毕。以上所述，属个人观点，若有错误，还请批评指正。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/07/24/ideaj-maven/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sean Huang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sean blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/07/24/ideaj-maven/" class="post-title-link" itemprop="url">在IDEAJ中使用maven遇到的一些坑</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-07-24 22:06:40 / Modified: 23:20:06" itemprop="dateCreated datePublished" datetime="2016-07-24T22:06:40+08:00">2016-07-24</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近开始使用IDEAJ来进行开发，因为是新的IDE，所以在使用的过程中各种不习惯，也遇到了许多坑，写下来，免得下次再遇到又跳进去</p>
<h3 id="问题一：用maven创建项目后卡在创建目录结构上"><a href="#问题一：用maven创建项目后卡在创建目录结构上" class="headerlink" title="问题一：用maven创建项目后卡在创建目录结构上"></a>问题一：用maven创建项目后卡在创建目录结构上</h3><p>这个问题相信很多人遇到过，这里只说我遇到的情况。</p>
<p>首先，如大部分网上的教程一样，创建一个空的项目，然后再项目中创建一个基于maven的model，接下来，勾选创建模板，按道理，IDEAJ就会自动创建maven的目录结构。结果问题来了，项目创建完成了，可是目录结构没出来，一直卡在创建目录上面了。</p>
<p>在网上扒到的问题的答案，有一种说法是说，卡在创建目录上是因为IDEAJ在创建骨架的时候，会请求网络。之所以卡住，就是因为网络不行，所以需要在使用Ideaj创建项目的时候添加参数，使其不去请求网络。</p>
<blockquote>
<p>archetypeCatalog=internal</p>
</blockquote>
<p>如图，在创建过程中，点击添加即可</p>
<p><img src="http://image.e65535.com/2016-07-24_223204.jpg" alt="创建maven过程"></p>
<p>如果真的是因为创建骨架的时候访问网络问题导致的卡住，以上方法是可行的，但不尽然。</p>
<p>同样遇到相同的情况，我在添加了对应的参数之后，却依旧还好卡在了创建骨架上。采取了好多方法之后没有找到解决的方法。后来想到用maven命令行尝试，于是在控制台输入了如下命令：</p>
<blockquote>
<p>mvn archetype:generate</p>
</blockquote>
<p>这条命令是mvn提供的创建骨架的命令，结果输入之后，发现maven卡在了下载一个文件上面。</p>
<p><img src="http://image.e65535.com/2016-07-11_233025.jpg" alt="卡壳"></p>
<p>最后，通过别人的maven资源库，直接将该文件复制过来之后，一切就又正常了。</p>
<p>所以，基本上解决这个问题考虑的是在这个过程中，网络出问题了。解决了网络问题，应该就可以了。</p>
<h3 id="问题二：创建项目后共享到git上"><a href="#问题二：创建项目后共享到git上" class="headerlink" title="问题二：创建项目后共享到git上"></a>问题二：创建项目后共享到git上</h3><p>在版本控制上，IDEAJ提供了svn和git等各种插件，给开发者带来了许多便利。可是有种情况，IDEAJ处理的不是很好。</p>
<p>很多时候，我们是从git上下载代码下来，这种情况下，IDEAJ提供的git基本上能提供我们所需要的功能，但是如果我的项目是新开的，想要将项目共享到git上面去，在IDEAJ上就存在问题了。</p>
<p>IDEAJ提供的共享项目到github上面的功能，却没有提供共享到私有git项目上面的功能，也就是说，按照IDEAJ的逻辑，你要新建一个项目就一定得按照，先建立版本库，再取下来的方式来新建。</p>
<p>这种方式是可以，可是却不人性化。在此说说用IDEAJ怎么将一个项目通过git共享行私有的git上面去。</p>
<ul>
<li>首先，需要将已有的项目添加为git项目，在IDEAJ的操作如下：</li>
</ul>
<p><img src="http://image.e65535.com/2016-07-24_230333.jpg" alt></p>
<ul>
<li>项目转换为git项目之后，需要将其与git上面的项目结合起来，所以需要到项目对应的目录下，执行以下命令</li>
</ul>
<pre><code># 为项目设置远程远程仓库 #
git remote add origin http://***.git

# 合并更新 #
git pull origin master  
git push origin master
</code></pre><ul>
<li>其实，合并更新部分是可以不要的，只要在为项目设置了远程仓库后，到IDEAJ下进行刷新，然后就可以通过IDEAJ将项目共享到私有git上了。</li>
</ul>
<h3 id="持续更新中。。。。。"><a href="#持续更新中。。。。。" class="headerlink" title="持续更新中。。。。。"></a>持续更新中。。。。。</h3>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/05/26/mysql-oracle-groupby/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sean Huang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sean blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/05/26/mysql-oracle-groupby/" class="post-title-link" itemprop="url">mysql与oracle在groupby语句上的细节差异</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-05-26 23:22:16 / Modified: 23:23:28" itemprop="dateCreated datePublished" datetime="2016-05-26T23:22:16+08:00">2016-05-26</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>之所以去纠那么细节的问题，是因为之前有过一个这样的场景：</p>
<p>有个同学，给了一条数据库的语句给我，问，为啥这样子的语句在oracle语句下执行不了。</p>
<pre><code>select * from xx where xxx is not null group by yy;
</code></pre><p>拿到这条语句的第一时间，其实，我也并没有看出是什么错。仔细一想之后才想起，在基础的SQL中包含该group by的select语句，select语句部分是有限制的，一般是聚合函数和group by 的字段。随后，我就告诉他，这条语句本身是有错的。</p>
<p>然而，我同学却反驳说，这条语句他在其他数据库中是能运行的。然后，就有了这篇博客</p>
<h4 id="细说"><a href="#细说" class="headerlink" title="细说"></a>细说</h4><p>为了询证，我询问了同学他说能运行的数据库是什么数据库。结果同学说是mysql。</p>
<p><img src="http://image.e65535.com/2016-05-26_150320.png" alt="oracle 下的执行情况"></p>
<p><img src="http://image.e65535.com/2016-05-26_225620.jpg" alt="mysql 下的执行情况"></p>
<p>如图所示，相同类型的语句，在oracle和mysql执行，一个是可以正常运行的，而在oracle上，却是没能通过语句的校验。为啥呢？</p>
<p>回过头看看，现在市场上的关系型数据库可谓不少，其实他们都在SQL语句的解析上，都遵循着SQL国际标准，只是各自遵循的严格程度不同而已，同时，各个数据库也在SQL标准上扩展开了，有了自己支持的特色的数据库语句，如mysql的limit。也就是这样，才有了上述情况。SQL标准中，其实在包含group by 的 select 语句能查询的数据是有限制的。Oracle比较严格的遵守了这一限制，而mysql 则并没有，这样才使得使用惯了mysql的朋友在刚开始的时候有这样的错觉，觉得明明正确的语句为啥就是执行不了。</p>
<h4 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h4><p>在标准这方面，要论对错，其实是没必要的。很多时候，标准制定出来，只是一种美好的期望而已。然而，作为技术，其实应该的更多的是回归本质，更多的了解原理，就不会因为某个工具并没严格要求的东西，养成不良的习惯。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/16/wechat-pay/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sean Huang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sean blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/01/16/wechat-pay/" class="post-title-link" itemprop="url">微信支付-我遇到的那些问题</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-01-16 21:27:47" itemprop="dateCreated datePublished" datetime="2016-01-16T21:27:47+08:00">2016-01-16</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2016-05-15 22:04:20" itemprop="dateModified" datetime="2016-05-15T22:04:20+08:00">2016-05-15</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>现在，越来越多公司，选择借微信的势来发展自己的平台，进入工作没多久，我也被告知了要对接微信支付的需求。原本以为这样的对接，跟着文档走，应该没多大的难度的，可是后来，我才发现，原来我太天真了。在此，留下印记，说说我在微信支付上面遇到的那些问题。</p>
<h4 id="1、关于微信支付"><a href="#1、关于微信支付" class="headerlink" title="1、关于微信支付"></a>1、关于微信支付</h4><p>首先说下微信支付。随着微信的红火，微信支付在第三方支付也占了一大块地盘，越来越多的公司在自己的APP或者网站上集成了微信支付。从微信支付的官网 <a href="https://pay.weixin.qq.com/index.php/home/login?return_url=/" target="_blank" rel="noopener">微信支付官方文档</a> 可以看出，微信支付主要分为四大块，公众号支付、APP支付、扫码支付（网站）、刷卡支付。工作上，我接触到了前三种，遇到了各种各样的问题。</p>
<h4 id="2、关于官方文档"><a href="#2、关于官方文档" class="headerlink" title="2、关于官方文档"></a>2、关于官方文档</h4><p>对于开发者来说，对接这种第三方支付，看其官方文档尤其重要。开发者可以通过官网，查到对应不同支付模块的官方文档，但是，请大家注意，该文档有待完善，完全照着文档做，可能实现不了你的功能</p>
<h4 id="3、微信支付流程"><a href="#3、微信支付流程" class="headerlink" title="3、微信支付流程"></a>3、微信支付流程</h4><p><img src="http://image.e65535.com/wecha-pay-time.jpg" alt="微信流程图"></p>
<p><br><br><br>微信支付的流程，在微信支付官网上也有所显示，这里更加泛化的说一下，其实微信支付需要的是集成了微信SDK的客户端，客户先通过客户端浏览完成订单，然后后台首先在业务系统生成了订单，订单生成后，业务系统请求微信服务器，进行统一下单。统一下单完成后，微信返回相关信息，后台就可以形成相应的支付二维码或者是封装出可以调起微信支付需要的信息。接下来，用户只要通过扫一扫或者点击确认支付，便可以调出微信支付。支付成功后，微信会给用户发送信息，同时也会对业务系统指定的地址发送对应的回调信息，将支付结果告知微信。同时，微信支付信息也可以通过后台直接请求微信支付来进行确认。</p>
<h4 id="4、微信支付相关"><a href="#4、微信支付相关" class="headerlink" title="4、微信支付相关"></a>4、微信支付相关</h4><p>首先，微信支付有一个最重要的过程，就是统一下单，简单的说，开发者需要将业务系统中的订单信息发送给微信，让微信后台形成在微信那边的一个支付订单。在向微信请求的时候，传送的数据为xml格式，微信要求xml传送的数据需要进行一次加密，然后将加密的字符串附加在xml中一起传输到服务器端，服务器端验证通过之后才能进行下订单操作。具体的算法说明地址 <a href="https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=4_3" target="_blank" rel="noopener">微信支付验签算法</a></p>
<p>以下，是基于java实现的加密算法：</p>
<pre><code>public static String signature(Map&lt;String, String&gt; map, String key) {
   Set&lt;String&gt; keySet = map.keySet();
   String[] str = new String[map.size()];
   StringBuilder tmp = new StringBuilder();
   str = keySet.toArray(str);
   Arrays.sort(str);
   for (int i = 0; i &lt; str.length; i++) {
      String t = str[i] + &quot;=&quot; + map.get(str[i]) + &quot;&amp;&quot;;
      tmp.append(t);
   }
   if (StringUtils.isNotBlank(key)) {
      tmp.append(&quot;key=&quot; + key);
   }
   String tosend = tmp.toString();
   MessageDigest md = null;
   byte[] bytes = null;
   try {

      md = MessageDigest.getInstance(&quot;MD5&quot;);
      bytes = md.digest(tosend.getBytes(&quot;utf-8&quot;));
   } catch (Exception e) {
      e.printStackTrace();
   }

   String singe = byteToStr(bytes);
   return singe.toUpperCase();

}
</code></pre><p>微信支付第一个问题，数据加密的key。这个坑在于不细心，微信支付有很多key，包括我们微信绑定时候自己输入的key，还有微信给的随机字符key，而这里，在用于加密的key，并不是我们微信公众号中的 AppSecret，而是在微信支付商户后台设置的key，设置的位置为： key设置路径：微信商户平台(pay.weixin.qq.com)–&gt;账户设置–&gt;API安全–&gt;密钥设置 如果不是使用该Key，哪怕是你的算法写对了，数据传到用户那里，依然返回的是签名错误。</p>
<p>PS：微信官方给出了一个验证签名准确性的工具，该工具地址为 <a href="https://pay.weixin.qq.com/wiki/tools/signverify/" target="_blank" rel="noopener">微信验签工具</a>，AnyWay，正如刚才说了，如果key设置的不正确，比如说使用了AppSecret ，那么，你会发现，该工具的出的加密字符串和自己得出的一模一样，然后当你发送给微信服务端的时候，永远返回的是错误。</p>
<p>微信支付第二个问题，post编码问题。当组装好数据后，需要通过POST的形式向微信服务器发送数据。可是，问题来了，微信的数据封装的完全正确，key也设置正确了，在官方的验证工具上验证出来也是正确的，可是，微信总是提示签名错误。这个问题出现在post请求的编码问题上，遇到这个问题的情况是，在封装数据的时候，xml里面加入了中文，然后每次请求就会报错，可是如果中文去掉，下单成功。最后才发现，原来POST的时候，没有设置编码，设置成为UTF8之后就没事了。可是，返回的签名错误，也真心难排查啊</p>
<p>微信支付第三个问题，js-sdk调起支付控件。这一步时讲在微信里面H5调起支付控件的。需要注意的是要在H5上面调出支付控件，第一件事需要在微信公众要后台添加指定域名允许该域名调起控件，否则，是不能调起的。设置的教程在这:<a href="https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=7_3" target="_blank" rel="noopener">微信js-sdk调起教程</a> 。</p>
<p>设置完成之后，接下来是通过js调起，在此吐槽一下，我第一次做的时候，是直接copy的官方的js下来改的，可是。。。。。。。官方的JS上面全角半角的字符混合，导致的别说是他的JS了，就是我自己写的JS最后都没调出来。。。。。然后，关于提示，，苹果版还好，安卓版的微信，如果调不出控件，它一点反应都不会有的。。相对而言，苹果版会有一个弹框提示，所以后期，只要出现问题，都先用苹果测测看看出了什么错。</p>
<p>微信支付第四个问题，app端数据封装。能够统一下单了，这样一来就是对数据封装返回给前端了，这一部，还是需要进行签名，按理来说，前面和前面采用的是同样的方法，应该问题不大才对。确实，在web端和扫码支付都没多大问题，可是，app端问题来了。我在公司刚开始和安卓的同事调这个的时候，本来以为一个下午能搞定了。可是，却不如我们所想。我们全部采用的是官方给的要求进行封装的数据，我后台统一下单完成之后，给到安卓，结果安卓死活调不出支付控件，而且一直都返回-1的结果，该结果，可以说一点用处都没有。安卓端的同时调了好久，一直没有找到解决方案，值得一说的是，它官方给的Demo是可以调出结果界面，可是也是调不出支付控件的。而且，他的java文件，utf-8和GBK两种编码混在一起的。最后说一下，为啥app调不出支付控件。</p>
<p><img src="http://image.e65535.com/wechat-pay-sign.png" alt="微信验签参数图"></p>
<pre><code>//网页调起的时候
String time = Long.toString(System.currentTimeMillis());
back.put(&quot;appId&quot;, mchappid);
back.put(&quot;timeStamp&quot;, time);
back.put(&quot;nonceStr&quot;, &quot;5K8264ILTKCH16CQ2502SI8ZNMTM67VS&quot;);
back.put(&quot;package&quot;, &quot;prepay_id=&quot; + order.getPrepay_id());
back.put(&quot;signType&quot;, &quot;MD5&quot;);
String sign2 = SignatureUtils.signature(back, wx_key);

JSONObject jsonObject = new JSONObject();
jsonObject.put(&quot;appId&quot;, mchappid);
jsonObject.put(&quot;timeStamp&quot;, time);
jsonObject.put(&quot;nonceStr&quot;, &quot;5K8264ILTKCH16CQ2502SI8ZNMTM67VS&quot;);
jsonObject.put(&quot;package&quot;, &quot;prepay_id=&quot; + order.getPrepay_id());
jsonObject.put(&quot;signType&quot;, &quot;MD5&quot;);
jsonObject.put(&quot;paySign&quot;, sign2);

result.put(&quot;status&quot;, &quot;success&quot;);
result.put(&quot;msg&quot;, &quot;下单成功&quot;);
result.put(&quot;obj&quot;, jsonObject);
return result;
</code></pre><hr>
<pre><code>//APP调起的时候,请注意，安卓端不能用驼峰法，所有的key必须使用小写
String time = Long.toString(System.currentTimeMillis());
back.put(&quot;appid&quot;, app_mchappid);
back.put(&quot;timestamp&quot;, time);
back.put(&quot;partnerid&quot;, app_mchid);
back.put(&quot;noncestr&quot;, &quot;5K8264ILTKCH16CQ2502SI8ZNMTM67VS&quot;);
back.put(&quot;prepayid&quot;, order.getPrepay_id());
back.put(&quot;package&quot;, &quot;Sign=WXPay&quot;);
String sign2 = SignatureUtils.signature(back, wx_key);

JSONObject jsonObject = new JSONObject();
jsonObject.put(&quot;appid&quot;, app_mchappid);
jsonObject.put(&quot;timestamp&quot;, time);
jsonObject.put(&quot;partnerid&quot;, app_mchid);
jsonObject.put(&quot;noncestr&quot;, &quot;5K8264ILTKCH16CQ2502SI8ZNMTM67VS&quot;);
jsonObject.put(&quot;prepayid&quot;, order.getPrepay_id());
//jsonObject.put(&quot;package&quot;, &quot;Sign=WXPay&quot;);
jsonObject.put(&quot;sign&quot;, sign2);
result.put(&quot;status&quot;, &quot;success&quot;);
result.put(&quot;msg&quot;, &quot;下单成功&quot;);
result.put(&quot;obj&quot;, jsonObject);
return result;
</code></pre><p>如图，为微信官方文档中安卓调起支付控件的示例代码，接下来为web端调起支付控件时候进行加密的算法，最后为解决问题后返回给APP数据时候数据封装的代码。问题所在就是在于，它数据的封装不像官网所说的使用驼峰法，app的时候，需要把所有的字符小写，，，小写，，，，，，，。还有，官方说的packageValue是错的，要用package，就是因为这些错，加密出来的数据是错的，所以app端才调不出支付控件。在此，为我那个调到奔溃的同事默哀。</p>
<p>至今为止遇到的问题大致如上，做下笔记，同时希望对同为开发的朋友有用<br>最后，附上本人在github上的一个基于java的微信支付后台Demo <a href="https://github.com/Seanid/wechatPay" target="_blank" rel="noopener">简单的微信支付案例</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/08/09/computer-ie8-bug/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sean Huang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sean blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/08/09/computer-ie8-bug/" class="post-title-link" itemprop="url">计算机安装了IE8一半退出重启时，桌面只显示背景</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2015-08-09 11:57:59" itemprop="dateCreated datePublished" datetime="2015-08-09T11:57:59+08:00">2015-08-09</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-08-09 12:37:24" itemprop="dateModified" datetime="2018-08-09T12:37:24+08:00">2018-08-09</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>刚接触网管，公司的同事就给了我一个难题。公司有两台计算机装了某平台的管理系统，今天收到的第一个任务是把这两台机子给调换过来，调换过来以后就是给其中一台打印机装驱动。安装完成驱动后，一个同事将计算机上一些不必要的程序给删了，同时点了一下IE8的升级键。可是同事没有等升级完成后就重启了机器，机器重启后，就看不到桌面了。只有背景，同时键盘上开始键也没有反应，只能按Ctrl +Atl+Delete 键进入任务管理器,打不开任何软件。</p>
<h2 id="解决思路："><a href="#解决思路：" class="headerlink" title="解决思路："></a>解决思路：</h2><p>1、是不是explorer没启动?</p>
<p>操作：从任务管理器添加新任务explorer.exe。</p>
<p>结果：打不开，显示没有找到iertutil.dl 。同时无法使用USB接口。</p>
<p>2、导入iertutil.dll ；</p>
<p>操作：通过网络查找iertutil.dll文件，找到了7.0版，通过PE复制到C盘下，C:\windows\system32 目录下，同时通过命令控制符，执行regsvr32 C:\windows\system32\iertutil.dll （注册iertutil.dll文件）</p>
<p>结果：显示  “无法定位序数173 于动态链接库 iertutil.dll 上”  或“已加载找不到dllregisterserver输入点  ”</p>
<p>3、dll文件也分版本，再从网上找到iertutil.dll 8.0版，重启，顺利开机。  </p>
<p>总结：出现这样的问题，大部分是用户误操作所致，很可能是杀毒软件导致或者是软件升级到一半后重启的结果。</p>
<p>解决方法：从网上找到适合该机的dll版本，然后通过PE导入到指定文件夹，最后在重新注册一下改动态库即可</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2013/10/10/about/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sean Huang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sean blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2013/10/10/about/" class="post-title-link" itemprop="url">关于博客</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2013-10-10 22:43:35" itemprop="dateCreated datePublished" datetime="2013-10-10T22:43:35+08:00">2013-10-10</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-10-10 23:01:22" itemprop="dateModified" datetime="2018-10-10T23:01:22+08:00">2018-10-10</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>接触博客，应该是从我开始学计算机开始吧。那时候，偶尔会将自己学习的一些东西发布上网。发布的方式有很多种，刚开始实在QQ空间，后来接触的很多平台都有博客，于是乎经常是想起了哪个账号，就把东西发布到哪个平台去，所以有过很多个博客，如新浪、网易、博客园……</p>
<p>很多时候，文章写完后就直接发布了，不在乎其中的对错，不去做后续的维护。后面偶尔点击进去，发现原来有人批评过我。也有些时候，打开邮件时发现有人给我留下感谢的话语，说我的经验帮他们解决了问题。每当看到这些，总想着，不管好坏，自己写过的东西，至少还是有点存在感的吧！于是乎呢，开始自己维护自己的博客了。</p>
<p>不知道在哪个博主哪里看过这样一句话：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">所谓的博客，都是孤芳自赏</span><br></pre></td></tr></table></figure>
<p>如果真是这样，我想一直自赏下去，哈哈~~</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Sean Huang</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">8</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">tags</span>
                  
                </div>
              
            </nav>
          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Sean Huang</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.0.1</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.1"></script>

  <script src="/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/js/src/schemes/muse.js?v=7.0.1"></script>



  

  


  <script src="/js/src/next-boot.js?v=7.0.1"></script>


  

  

  

  



  




  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
